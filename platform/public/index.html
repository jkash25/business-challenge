<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <script>
  function toggleCalendar() {
    const popup = document.getElementById("calendar-popup");
    popup.classList.toggle("hidden");
  }
</script>

  <script>
    function toggleNotifications() {
      document.getElementById("notification-panel").classList.toggle("hidden");
      document.getElementById("profile-menu").classList.add("hidden");
    }

    function toggleProfileMenu() {
      document.getElementById("profile-menu").classList.toggle("hidden");
      document.getElementById("notification-panel").classList.add("hidden");
    }

    // Close dropdowns when clicking outside
    window.addEventListener("click", function (e) {
      if (!e.target.closest(".notification-wrapper")) {
        document.getElementById("notification-panel").classList.add("hidden");
      }
      if (!e.target.closest(".profile-wrapper")) {
        document.getElementById("profile-menu").classList.add("hidden");
      }
    });
  </script>

  <body>
    
    <script src="navbar.js"></script>
    <main class="dashboard">
      <section class="greeting-section">
        <h1 id="greeting">Good morning!</h1>
        <p>You can earn up to 285 reward points today.</p>

        <div class="reward-info">
          <div class="info-box">
            200<br /><span>Current Reward Points</span>
          </div>
          <div class="info-box">
            750<br /><span>All Time Reward Points</span>
          </div>
          <div class="info-box">
            0<br /><span>Training Sessions (30 Days)</span>
          </div>
          <div class="info-box">0<br /><span>Correct Answer Streak</span></div>
        </div>
      </section>

      <section class="quick-links">
        <div class="quick-link">ðŸš€ Become</div>
        <div class="quick-link" onclick="toggleCalendar()">ðŸ“… Events</div>
      </section>

      <section class="activities">
        <div class="overall-progress">
          <div class="progress-label">Overall Progress</div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
        </div>
        <h2>Today's Activities</h2>

        <div class="activity-card">
          <div>
            <h3>Welcome with Warmth</h3>
            <p>0 of 5 items completed</p>
          </div>
          <a href="topicpage/topic.html?topic=Welcome%20with%20Warmth">
            <button class="start-btn">Start Topic</button>
          </a>
        </div>

        <div class="activity-card">
          <div>
            <h3>The Heart of Hospitality</h3>
            <p>0 of 5 items completed</p>
          </div>
          <a href="topicpage/topic.html?topic=The%20Heart%20Of%20Hospitality">
            <button class="start-btn">Start Topic</button>
          </a>
        </div>

        <div class="activity-card">
          <div>
            <h3>Authentic Interactions with Guests</h3>
            <p>0 of 5 items completed</p>
          </div>
          <a href="topicpage/topic.html?topic=Authentic%20interactions%20With%20Guests">
            <button class="start-btn">Start Topic</button>
          </a>
        </div>

        <div class="activity-card">
          <div>
            <h3>The Business We Do</h3>
            <p>25 Reward Points â€¢ 1 Video</p>
          </div>
          <button class="start-btn">Start Topic</button>
        </div>
      </section>
    </main>

    <div class="help-tab">Need Help</div>
    <script>
  const user = sessionStorage.getItem("user");

  if (!user) {
    window.location.href = "login.html";
  } else {
    // Update profile icon
    const profileIcon = document.querySelector(".profile-icon");
    if (profileIcon) {
      profileIcon.textContent = user.split(" ").map((n) => n[0]).join("").toUpperCase() + " â–¼";
    }

    // Update greeting
    const greetingEl = document.getElementById("greeting");
    const hour = new Date().getHours();
    let timeOfDay = "Hello";

    if (hour < 12) timeOfDay = "Good morning";
    else if (hour < 18) timeOfDay = "Good afternoon";
    else timeOfDay = "Good evening";

    greetingEl.textContent = `${timeOfDay}, ${user}!`;
  }
   const completed = JSON.parse(localStorage.getItem("completedActivities") || "{}");
      const cards = document.querySelectorAll(".activity-card");
      let completedCount = 0;

      cards.forEach((card) => {
        const title = card.querySelector("h3").textContent.trim();
        console.log("current card title: ", title);
        console.log("comparing against stored keys: ", Object.keys(completed));
        if (completed[title]) {
          completedCount++;
          const status = document.createElement("p");
          status.textContent = "âœ… Completed";
          status.style.color = "green";
          card.appendChild(status);
        }
      });

      const percent = (completedCount / cards.length) * 100;
      document.querySelector(".progress-fill").style.width = `${percent}%`;
  function logout() {
    localStorage.removeItem("user");
    window.location.href = "login.html";
  }
</script>

    </script>
    <div id="calendar-popup" class="calendar hidden">
  <div class="calendar-header">
    <h2>ðŸ“… July 2025</h2>
    <span onclick="toggleCalendar()" class="close-btn">âœ–</span>
  </div>
  <ul class="event-list">
    <li><strong>July 10:</strong> Marriott Leadership Summit</li>
    <li><strong>July 15:</strong> New Property Launch - Dubai</li>
    <li><strong>July 20:</strong> Sustainability Webinar</li>
    <li><strong>July 25:</strong> Employee Recognition Day</li>
  </ul>
</div>

  </body>
</html>
